//	Palettelibrary
//
//    Copyright 2013 Kevin Martin, Steve Bryson
//
//    This file is part of SuperFractalThing.
//
//    SuperFractalThing is free software: you can redistribute it and/or modify
//    it under the terms of the GNU General Public License as published by
//    the Free Software Foundation, either version 3 of the License, or
//    any later version.
//
//    SuperFractalThing is distributed in the hope that it will be useful,
//    but WITHOUT ANY WARRANTY; without even the implied warranty of
//    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
//    GNU General Public License for more details.
//
//    You should have received a copy of the GNU General Public License
//    along with SuperFractalThing.  If not, see <http://www.gnu.org/licenses/>.
//

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.BufferedReader;
import java.io.ByteArrayInputStream;
import java.io.File;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;

import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;

interface PaletteLibraryLoader
{
	void LoadTheFile(File f);
	void LoadTheFile(BufferedReader br);
}

public class PaletteLibrary implements ActionListener
{
	static String[] sLibrary=
		{
			"Watercolor",
			"sft_palette" + "\n" +
					"0.72,0.268,0.532,-0.006000000000000005,-0.006000000000000005,0.0," + "\n" +
					"3.8641589639154454" + "\n" +
					"0.0,1.6524777357882312,0.0,0.0,0.0,0.0" + "\n" +
					"7" + "\n" +
					"4,1000.0,0.661,0.708,4.385663344411351,0.0,0.898" + "\n" +
					"4,100.0,0.337,0.834,3.7447784430790336,0.43,0.777" + "\n" +
					"3,100.0,0.717,1.0,1.7278759594743862,0.0,0.823" + "\n" +
					"0" + "\n" +
					"0,100.0,0.804,1.0,1.5205308443374599,0.0,0.5" + "\n" +
					"0,100.0,0.1,0.442,3.2735395450405647,0.395,0.5" + "\n" +
					"0,100.0,0.37,1.0,2.607521902479528,0.219,0.5" + "\n" +
					"0" + "\n" +
					"0,100.0,0.931,1.0,4.008672225980576,0.0,0.5" + "\n" +
					"0,100.0,0.1,1.0,2.205398042820035,0.0,0.5" + "\n" +
					"0,100.0,0.81,1.0,4.234866897039041,0.49,0.5" + "\n" +
					"7" + "\n" +
					"0,100.0,0.833,0.252,2.463008640414398,0.623,0.5" + "\n" +
					"0,100.0,0.1,1.0,0.0,0.0,0.5" + "\n" +
					"1,100.0,0.851,1.0,2.054601595447725,0.0,0.365" + "\n" +
					"0" + "\n" +
					"0,100.0,0.10000000149011612,1.0,0.0,0.0,0.5" + "\n" +
					"0,100.0,0.10000000149011612,1.0,0.0,0.0,0.5" + "\n" +
					"0,100.0,0.10000000149011612,1.0,0.0,0.0,0.5" + "\n" +
					"0" + "\n" +
					"0,100.0,0.10000000149011612,1.0,0.0,0.0,0.5" + "\n" +
					"0,100.0,0.10000000149011612,1.0,0.0,0.0,0.5" + "\n" +
					"0,100.0,0.10000000149011612,1.0,0.0,0.0,0.5" + "\n",
			"Velvet",
			"sft_palette" + "\n" +
					"1.0,0.44999999999999996,0.6379999999999999,0.252,-0.404,0.0," + "\n" +
					"1.8032741831605412" + "\n" +
					"1.338318470429252,1.7215927839279175,0.0,0.0,0.0,0.0" + "\n" +
					"0" + "\n" +
					"0,100.0,1.0,1.0,4.121769561509808,0.0,0.5" + "\n" +
					"0,1000.0,1.0,0.638,0.0,0.4,0.5" + "\n" +
					"0,1000.0,1.0,0.742,0.0,0.128,0.5" + "\n" +
					"0" + "\n" +
					"0,100.0,1.0,1.0,0.0,0.0,0.5" + "\n" +
					"0,1000.0,1.0,0.8040000200271606,0.0,0.37400001287460327,0.5" + "\n" +
					"0,100.0,1.0,0.7210000157356262,0.0,0.3840000033378601,0.5" + "\n" +
					"1" + "\n" +
					"1,100.0,1.0,1.0,0.0,0.0,0.5" + "\n" +
					"1,1000.0,1.0,0.0,0.0,0.0,0.5" + "\n" +
					"1,10.0,1.0,0.7250000238418579,2.3624777793884277,0.13600000739097595,0.5170000195503235" + "\n" +
					"0" + "\n" +
					"0,1.0,84.0,1.0,2.155132532119751,0.0,0.28700000047683716" + "\n" +
					"0,1.0,100.0,1.0,0.0,0.0,0.5" + "\n" +
					"0,1.0,189.0,1.0,2.9845130443573,0.0,0.5" + "\n" +
					"0" + "\n" +
					"0,100.0,1.0,1.0,3.606548309326172,0.0,0.5" + "\n" +
					"0,1000.0,1.0,0.0,0.0,0.14000000059604645,0.5" + "\n" +
					"0,200.0,1.0,0.9129999876022339,1.6147786378860474,0.328000009059906,0.5" + "\n" +
					"0" + "\n" +
					"0,1.0,100.0,1.0,0.0,0.0,0.5" + "\n" +
					"0,1.0,100.0,1.0,0.0,0.0,0.5" + "\n" +
					"0,1.0,100.0,1.0,0.0,0.0,0.5" + "\n",
			"Shimmer",
			"sft_palette" + "\n" +
					"1.0,0.6000000000000001,0.72,0.0,0.0,0.0," + "\n" +
					"0.0" + "\n" +
					"4.624424386084176,0.0,0.0,0.0,0.0,0.0" + "\n" +
					"0" + "\n" +
					"0,10.0,0.838,1.0,3.79504392553647,0.0,0.5" + "\n" +
					"0,1000.0,0.22,0.687,1.5205308443374599,0.558,0.5" + "\n" +
					"0,600.0,0.683,0.74,5.598318108697011,0.245,0.5" + "\n" +
					"1" + "\n" +
					"1,100.0,0.223,1.0,3.65053066347134,0.0,0.706" + "\n" +
					"1,1000.0,0.042,1.0,1.9917697423759289,0.0,0.698" + "\n" +
					"1,1000.0,0.653,1.0,0.0,0.166,0.664" + "\n" +
					"0" + "\n" +
					"0,50.0,0.178,1.0,0.0,0.0,0.5" + "\n" +
					"0,1000.0,0.001,0.604,0.0,0.358,0.5" + "\n" +
					"0,1000.0,0.5,0.528,0.0,0.483,0.5" + "\n" +
					"0" + "\n" +
					"0,1000.0,0.5,1.0,0.0,0.0,0.5" + "\n" +
					"0,1000.0,0.5,1.0,0.0,0.0,0.5" + "\n" +
					"0,1000.0,0.5,1.0,0.0,0.0,0.5" + "\n" +
					"0" + "\n" +
					"0,1000.0,0.5,1.0,0.0,0.0,0.5" + "\n" +
					"0,1000.0,0.5,1.0,0.0,0.0,0.5" + "\n" +
					"0,1000.0,0.5,1.0,0.0,0.0,0.5" + "\n" +
					"0" + "\n" +
					"0,1000.0,0.5,1.0,0.0,0.0,0.5" + "\n" +
					"0,1000.0,0.5,1.0,0.0,0.0,0.5" + "\n" +
					"0,1000.0,0.5,1.0,0.0,0.0,0.5" + "\n",
			"Pastel",
			"sft_palette" + "\n" +
					"1.0,0.6839999999999999,0.3440000000000001,0.5920000000000001,0.5780000000000001,0.0," + "\n" +
					"4.932300466135976" + "\n" +
					"4.172035043967246,0.0,0.0,0.0,0.0,0.0" + "\n" +
					"0" + "\n" +
					"0,100.0,0.374,1.0,1.1623892818282233,0.0,0.577" + "\n" +
					"0,1000.0,0.804,1.0,1.7090264035528475,0.442,0.5" + "\n" +
					"0,1000.0,0.272,0.777,3.7447784430790336,0.0,0.5" + "\n" +
					"0" + "\n" +
					"0,100.0,0.506,1.0,3.474601474870311,0.0,0.5" + "\n" +
					"0,1000.0,0.589,1.0,0.0,0.698,0.5" + "\n" +
					"0,100.0,0.499,1.0,2.4441590844928593,0.245,0.5" + "\n" +
					"4" + "\n" +
					"4,100.0,0.517,0.449,0.3581415625092364,0.0,0.577" + "\n" +
					"4,1000.0,0.566,0.0,2.990796206217483,0.224,0.5" + "\n" +
					"4,1000.0,0.83,0.889,3.556282883863646,0.388,0.321" + "\n" +
					"0" + "\n" +
					"0,1000.0,0.476,1.0,0.0,0.0,0.5" + "\n" +
					"0,1000.0,0.521,1.0,0.0,0.0,0.5" + "\n" +
					"0,1000.0,0.427,1.0,0.0,0.546,0.5" + "\n" +
					"0" + "\n" +
					"0,1000.0,0.419,1.0,0.0,0.0,0.5" + "\n" +
					"0,1000.0,0.593,0.0,0.0,0.0,0.5" + "\n" +
					"0,1000.0,0.174,0.408,3.8641589639154454,0.287,0.5" + "\n" +
					"0" + "\n" +
					"0,1.0,100.0,1.0,0.0,0.0,0.5" + "\n" +
					"0,1.0,100.0,1.0,0.0,0.0,0.5" + "\n" +
					"0,1.0,100.0,1.0,0.0,0.0,0.5" + "\n",
			"Rosy",
			"sft_palette" + "\n" +
					"1.0,0.29800000000000004,0.16999999999999993,0.268,0.0,0.0," + "\n" +
					"2.5761059759436304" + "\n" +
					"1.9226547039969535,0.0,0.9487609813841175,3.0599112445964582,0.0,0.0" + "\n" +
					"0" + "\n" +
					"0,1000.0,1.0,1.0,3.1227430976682546,0.0,0.245" + "\n" +
					"0,1000.0,1.0,1.0,1.200088393671301,0.395,0.667" + "\n" +
					"0,1000.0,1.0,0.845,2.607521902479528,0.086,0.5" + "\n" +
					"0" + "\n" +
					"0,100.0,1.0,1.0,0.0,0.0,0.5" + "\n" +
					"0,1000.0,1.0,1.0,0.0,0.542,0.5" + "\n" +
					"0,100.0,1.0,0.906,0.0,0.23,0.69" + "\n" +
					"2" + "\n" +
					"2,1000.0,1.0,1.0,3.03477850336774,0.0,0.5" + "\n" +
					"2,1000.0,1.0,0.569,0.0,0.407,0.721" + "\n" +
					"2,1000.0,1.0,0.527,2.557256420022092,0.097,0.973" + "\n" +
					"4" + "\n" +
					"4,1000.0,1.0,1.0,0.0,0.0,0.5" + "\n" +
					"4,1000.0,1.0,0.0,0.0,0.0,0.5" + "\n" +
					"4,100.0,1.0,1.0,1.778141441931823,0.165,0.317" + "\n" +
					"0" + "\n" +
					"0,1.0,100.0,1.0,0.0,0.0,0.5" + "\n" +
					"0,1.0,100.0,1.0,0.0,0.0,0.5" + "\n" +
					"0,1.0,100.0,1.0,0.0,0.0,0.5" + "\n" +
					"0" + "\n" +
					"0,1.0,100.0,1.0,0.0,0.0,0.5" + "\n" +
					"0,1.0,100.0,1.0,0.0,0.0,0.5" + "\n" +
					"0,1.0,100.0,1.0,0.0,0.0,0.5" + "\n",
			"Rainbow",
			"sft_palette" + "\n" +
					"1.0,1.0,1.0,0.6519999999999999,1.0,0.0," + "\n" +
					"2.9845130209103035" + "\n" +
					"0.0,0.0,0.0,0.0,0.0,0.0" + "\n" +
					"0" + "\n" +
					"0,1000.0,0.649,0.706,3.933274002294421,0.0,0.5" + "\n" +
					"0,1000.0,0.5,0.834,2.9153979825313283,0.381,0.5" + "\n" +
					"0,1000.0,0.22,0.679,0.8796459430051421,0.396,0.5" + "\n" +
					"7" + "\n" +
					"0,1000.0,0.5,1.0,0.0,0.0,0.5" + "\n" +
					"0,1000.0,0.5,0.0,0.0,0.0,0.5" + "\n" +
					"1,600.0,0.898,1.0,6.138672045114456,0.0,0.774" + "\n" +
					"0" + "\n" +
					"0,100.0,0.484,1.0,2.7960174616949156,0.0,0.5" + "\n" +
					"0,1000.0,0.5,1.0,0.0,0.438,0.5" + "\n" +
					"0,1000.0,0.457,1.0,5.786813667912399,0.215,0.5" + "\n" +
					"0" + "\n" +
					"0,1000.0,0.14,1.0,5.598318108697011,0.0,0.5" + "\n" +
					"0,1000.0,0.5,1.0,0.0,0.0,0.5" + "\n" +
					"0,1000.0,0.321,1.0,4.743804906920587,0.0,0.5" + "\n" +
					"1" + "\n" +
					"1,1000.0,0.5,1.0,0.0,0.0,0.5" + "\n" +
					"1,1000.0,0.5,0.0,0.0,0.0,0.5" + "\n" +
					"1,500.0,0.257,1.0,0.09424777960769379,0.0,0.691" + "\n" +
					"0" + "\n" +
					"0,1000.0,0.5,1.0,0.0,0.0,0.5" + "\n" +
					"0,1000.0,0.5,1.0,0.0,0.0,0.5" + "\n" +
					"0,1000.0,0.5,1.0,0.0,0.0,0.5" + "\n",
			"Soft",
			"sft_palette" + "\n" +
					"1.0,0.26,-0.358,0.554,-0.0040000000000000036,0.0," + "\n" +
					"1.275486617357456" + "\n" +
					"0.0,0.0,0.0,0.0,0.0,0.0" + "\n" +
					"7" + "\n" +
					"4,1000.0,0.265,1.0,2.5132741228718345,0.0,0.899" + "\n" +
					"4,1000.0,0.57,0.619,0.0,0.06,0.899" + "\n" +
					"3,1000.0,0.189,0.6,3.078760800517997,0.321,0.823" + "\n" +
					"0" + "\n" +
					"0,100.0,0.668,1.0,1.7278759594743862,0.0,0.5" + "\n" +
					"0,1000.0,1.0,1.0,1.6838936623241292,0.395,0.5" + "\n" +
					"0,10.0,1.0,0.491,1.8032741831605412,0.087,0.5" + "\n" +
					"0" + "\n" +
					"0,100.0,1.0,1.0,1.7215927741672068,0.0,0.5" + "\n" +
					"0,1000.0,1.0,1.0,2.205398042820035,0.0,0.5" + "\n" +
					"0,1000.0,0.14,0.419,2.016902483604647,0.049,0.5" + "\n" +
					"7" + "\n" +
					"0,1000.0,1.0,0.252,1.6336281798666923,0.0,0.5" + "\n" +
					"0,1000.0,1.0,0.0,0.0,0.894,0.5" + "\n" +
					"1,100.0,0.887,1.0,2.8211502029236346,0.0,0.54" + "\n" +
					"0" + "\n" +
					"0,1.0,100.0,1.0,0.0,0.0,0.5" + "\n" +
					"0,1.0,100.0,1.0,0.0,0.0,0.5" + "\n" +
					"0,1.0,100.0,1.0,0.0,0.0,0.5" + "\n" +
					"0" + "\n" +
					"0,1.0,100.0,1.0,0.0,0.0,0.5" + "\n" +
					"0,1.0,100.0,1.0,0.0,0.0,0.5" + "\n" +
					"0,1.0,100.0,1.0,0.0,0.0,0.5" + "\n",
			"Oilslick",
			"sft_palette" + "\n" +
					"1.0,0.6299999999999999,0.1479999999999999,0.1399999999999999,0.0,0.0," + "\n" +
					"1.1372565405995052" + "\n" +
					"0.5215043804959058,0.0,0.0,0.0,0.0,0.0" + "\n" +
					"0" + "\n" +
					"0,100.0,0.423,1.0,1.6587609210954108,0.0,0.5" + "\n" +
					"0,100.0,0.864,0.57,0.0,0.166,0.5" + "\n" +
					"0,100.0,0.269,0.26,3.1038935417467157,0.143,0.5" + "\n" +
					"1" + "\n" +
					"1,100.0,0.653,1.0,0.0,0.0,0.5" + "\n" +
					"1,100.0,0.5,0.0,0.0,0.0,0.384" + "\n" +
					"1,100.0,0.216,0.769,4.033804967209294,0.298,0.546" + "\n" +
					"6" + "\n" +
					"6,100.0,0.5,0.0,0.0,0.736,0.5" + "\n" +
					"6,100.0,0.5,0.0,0.0,1.0,0.5" + "\n" +
					"6,1000.0,0.34,0.249,0.0,0.0,0.736" + "\n" +
					"6" + "\n" +
					"6,100.0,0.288,0.0,0.0,0.608,0.5" + "\n" +
					"6,100.0,0.5,1.0,0.0,1.0,0.5" + "\n" +
					"6,100.0,0.442,0.475,5.573185367468294,0.0,0.517" + "\n" +
					"0" + "\n" +
					"0,100.0,0.5,1.0,0.0,0.0,0.5" + "\n" +
					"0,100.0,0.5,1.0,0.0,0.0,0.5" + "\n" +
					"0,100.0,0.5,1.0,0.0,0.0,0.5" + "\n" +
					"0" + "\n" +
					"0,100.0,0.5,1.0,0.0,0.0,0.5" + "\n" +
					"0,100.0,0.5,1.0,0.0,0.0,0.5" + "\n" +
					"0,100.0,0.5,1.0,0.0,0.0,0.5" + "\n",
			"Flat",
			"sft_palette" + "\n" +
					"1.0,0.6479999999999999,1.0,0.16999999999999993,1.0,0.0," + "\n" +
					"3.1541590242041524" + "\n" +
					"4.172035043967246,0.0,0.0,0.0,0.0,0.0" + "\n" +
					"0" + "\n" +
					"0,100.0,1.0,1.0,2.7897342763877364,0.0,0.577" + "\n" +
					"0,1000.0,1.0,1.0,2.9970793915246627,0.442,0.5" + "\n" +
					"0,1000.0,1.0,0.89,1.7530087007031045,0.245,0.5" + "\n" +
					"0" + "\n" +
					"0,100.0,1.0,1.0,3.480884660177491,0.0,0.5" + "\n" +
					"0,1000.0,1.0,1.0,0.0,0.698,0.5" + "\n" +
					"0,100.0,1.0,1.0,1.4325662500369456,0.245,0.5" + "\n" +
					"4" + "\n" +
					"4,100.0,1.0,0.449,0.3581415625092364,0.0,0.577" + "\n" +
					"4,1000.0,1.0,0.0,2.9970793915246627,0.225,0.5" + "\n" +
					"4,1000.0,1.0,0.89,1.7090264035528475,0.388,0.321" + "\n" +
					"0" + "\n" +
					"0,1000.0,1.0,1.0,0.0,0.0,0.5" + "\n" +
					"0,1000.0,0.438,1.0,0.0,0.0,0.5" + "\n" +
					"0,1000.0,1.0,1.0,0.0,0.546,0.5" + "\n" +
					"0" + "\n" +
					"0,1000.0,1.0,1.0,0.0,0.0,0.5" + "\n" +
					"0,1000.0,1.0,0.0,0.0,0.0,0.5" + "\n" +
					"0,1000.0,1.0,0.829,0.15707963267948966,0.287,0.5" + "\n" +
					"0" + "\n" +
					"0,1000.0,1.0,1.0,0.0,0.0,0.5" + "\n" +
					"0,1000.0,1.0,1.0,0.0,0.0,0.5" + "\n" +
					"0,1000.0,1.0,1.0,0.0,0.0,0.5" + "\n",
			"Stripes",
			"sft_palette" + "\n" +
					"1.0,1.0,1.0,1.0,1.0,-1.0," + "\n" +
					"0.0" + "\n" +
					"0.0,0.0,0.0,0.0,1.2063715789784806,3.3677873246482584" + "\n" +
					"0" + "\n" +
					"0,1000.0,0.299,1.0,0.0,0.0,0.5" + "\n" +
					"0,1000.0,0.216,1.0,0.0,0.242,0.5" + "\n" +
					"0,1000.0,0.5,0.762,0.0,0.253,0.5" + "\n" +
					"6" + "\n" +
					"6,1000.0,0.5,0.0,2.463008640414398,0.57,0.525" + "\n" +
					"6,1000.0,0.5,0.0,0.0,1.0,0.528" + "\n" +
					"6,1000.0,0.5,0.491,3.6065483663210824,0.0,0.525" + "\n" +
					"6" + "\n" +
					"6,1000.0,0.5,0.0,0.0,0.374,0.57" + "\n" +
					"6,1000.0,0.5,0.0,0.0,0.272,0.574" + "\n" +
					"6,1000.0,0.5,0.502,0.0,0.0,0.555" + "\n" +
					"6" + "\n" +
					"6,1000.0,0.5,0.0,0.0,0.06,0.589" + "\n" +
					"6,1000.0,0.5,0.0,0.0,0.4,0.604" + "\n" +
					"6,1000.0,0.5,0.513,0.0,0.0,0.4" + "\n" +
					"6" + "\n" +
					"6,1000.0,0.25,0.083,0.0,0.951,0.577" + "\n" +
					"6,1000.0,0.14,0.755,0.0,0.0,0.577" + "\n" +
					"6,1000.0,0.14,0.653,0.0,0.0,0.577" + "\n" +
					"6" + "\n" +
					"6,1000.0,0.812,0.675,0.0,0.0,0.577" + "\n" +
					"6,1000.0,0.812,0.336,0.0,0.0,0.577" + "\n" +
					"6,1000.0,0.812,0.706,0.0,0.0,0.577" + "\n",
			"Init",
			"sft_palette" + "\n" +
					"1.0,0.0,0.0,0.0,0.0,0.0," + "\n" +
					"0.0" + "\n" +
					"0.0,0.0,0.0,0.0,0.0,0.0" + "\n" +
					"0" + "\n" +
					"0,1000.0,0.5,1.0,0.0,0.0,0.5" + "\n" +
					"0,1000.0,0.5,1.0,0.0,0.0,0.5" + "\n" +
					"0,1000.0,0.5,1.0,0.0,0.0,0.5" + "\n" +
					"0" + "\n" +
					"0,1000.0,0.5,1.0,0.0,0.0,0.5" + "\n" +
					"0,1000.0,0.5,1.0,0.0,0.0,0.5" + "\n" +
					"0,1000.0,0.5,1.0,0.0,0.0,0.5" + "\n" +
					"0" + "\n" +
					"0,1000.0,0.5,1.0,0.0,0.0,0.5" + "\n" +
					"0,1000.0,0.5,1.0,0.0,0.0,0.5" + "\n" +
					"0,1000.0,0.5,1.0,0.0,0.0,0.5" + "\n" +
					"0" + "\n" +
					"0,1000.0,0.5,1.0,0.0,0.0,0.5" + "\n" +
					"0,1000.0,0.5,1.0,0.0,0.0,0.5" + "\n" +
					"0,1000.0,0.5,1.0,0.0,0.0,0.5" + "\n" +
					"0" + "\n" +
					"0,1000.0,0.5,1.0,0.0,0.0,0.5" + "\n" +
					"0,1000.0,0.5,1.0,0.0,0.0,0.5" + "\n" +
					"0,1000.0,0.5,1.0,0.0,0.0,0.5" + "\n" +
					"0" + "\n" +
					"0,1000.0,0.5,1.0,0.0,0.0,0.5" + "\n" +
					"0,1000.0,0.5,1.0,0.0,0.0,0.5" + "\n" +
					"0,1000.0,0.5,1.0,0.0,0.0,0.5" + "\n",
				""
		};
	PaletteLibraryLoader mLoader;

	public void actionPerformed(ActionEvent event)
	{
		int i;
		for (i=0; i<sLibrary.length; i+=2)
		{
			if (event.getActionCommand().matches(sLibrary[i]))
			{
				String str = sLibrary[i+1];
				ByteArrayInputStream bis;
				try {
					bis = new ByteArrayInputStream(str.getBytes("UTF-8"));
				} catch (UnsupportedEncodingException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
					return;
				}
				BufferedReader br = new BufferedReader( new InputStreamReader(bis));		

				mLoader.LoadTheFile(br);
			}
		}
	}

	public PaletteLibrary(JMenuBar menuBar, PaletteLibraryLoader loader)
	{
		int i;
		mLoader=loader;
		JMenu menu = new JMenu("Palette Library");
		for (i=0; i<sLibrary.length-1; i+=2)
		{
			JMenuItem menuItem = new JMenuItem(sLibrary[i]);
			menuItem.addActionListener(this);
			menu.add(menuItem);

		}
		menuBar.add(menu);		
	}

}
